<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ContainerJs | Introduction</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/container-js/assets/css/2.styles.cdc107a7.css" as="style"><link rel="preload" href="/container-js/assets/js/app.33bb4a1f.js" as="script"><link rel="preload" href="/container-js/assets/js/0.e63dcabe.js" as="script"><link rel="prefetch" href="/container-js/assets/js/1.7f6b3b78.js">
    <link rel="stylesheet" href="/container-js/assets/css/2.styles.cdc107a7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/container-js/" class="home-link router-link-active"><img src="img/logo.png" class="logo"><span class="site-name can-hide">
      ContainerJs
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><a href="https://github.com/heywhy/container-js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><a href="https://github.com/heywhy/container-js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Introduction</span><!----></p><ul class="sidebar-group-items"><li><a href="/container-js/introduction.html#introduction-to-newcomers" class="sidebar-link">Introduction To Newcomers</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/container-js/introduction.html#binding" class="sidebar-link">Binding</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/container-js/introduction.html#binding-a-singleton" class="sidebar-link">Binding A Singleton</a></li><li class="sidebar-sub-header"><a href="/container-js/introduction.html#binding-instances" class="sidebar-link">Binding Instances</a></li><li class="sidebar-sub-header"><a href="/container-js/introduction.html#binding-primitives" class="sidebar-link">Binding Primitives</a></li><li class="sidebar-sub-header"><a href="/container-js/introduction.html#contextual-binding" class="sidebar-link">Contextual Binding</a></li><li class="sidebar-sub-header"><a href="/container-js/introduction.html#extending-service" class="sidebar-link">Extending Service</a></li></ul></li><li><a href="/container-js/introduction.html#resolving" class="sidebar-link">Resolving</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/container-js/introduction.html#automatic-injection" class="sidebar-link">Automatic Injection</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="introduction"><a href="#introduction" aria-hidden="true" class="header-anchor">#</a> Introduction</h1><p>Have you ever thought of how beautiful <strong>Laravel</strong> container is. Here is an implementation in <em>javascript</em>. 😀</p><h2 id="introduction-to-newcomers"><a href="#introduction-to-newcomers" aria-hidden="true" class="header-anchor">#</a> Introduction To Newcomers</h2><p>Container-js is a powerful tool for managing service dependencies and performing dependency injection. Dependency injection is a fancy phrase that essentially means this: service dependencies are &quot;injected&quot; into the factory as arguments/parameters.</p><p>Let's look at a simple example:</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>bind<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'container-js'</span><span class="token punctuation">)</span>
<span class="token comment">// using the comment style for this style should be used</span>
<span class="token comment">// with helper `wrap` or binded directly into the</span>
<span class="token comment">// container without specifying dependencies</span>
<span class="token keyword">const</span> <span class="token function-variable function">print</span> <span class="token operator">=</span> screen <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/*@container(screen)*/</span>
  <span class="token keyword">return</span> msg <span class="token operator">=&gt;</span> screen<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// or</span>
<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'phone'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'screen'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> print<span class="token punctuation">)</span>
<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'phone'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deps</span><span class="token punctuation">(</span>screen<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span>print<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="binding"><a href="#binding" aria-hidden="true" class="header-anchor">#</a> Binding</h2><p>Almost all of your service container bindings will be registered before use in the application, i.e. service registration before main application code</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>There is no need to bind services into the container if they do not depend on any other services.</p></div><p>We can register a binding using the <code>bind</code> method, passing the service name that we wish to register along with a Closure that returns a value to be consumed by other services/application:</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'phone'</span><span class="token punctuation">,</span> container <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span>container<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string">'screen'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note that we receive the container itself as an argument to the resolver only if no dependency is declared. We can then use the container to resolve sub-dependencies of the object/service we are building.</p><h3 id="binding-a-singleton"><a href="#binding-a-singleton" aria-hidden="true" class="header-anchor">#</a> Binding A Singleton</h3><p>The <code>singleton</code> method binds a service into the container that should only be resolved one time. Once a singleton binding is resolved, the same value/object instance will be returned on subsequent calls into the container:</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>make<span class="token punctuation">,</span> singleton<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'container-js'</span><span class="token punctuation">)</span>
<span class="token comment">// its shares same api as the bind method</span>
<span class="token function">singleton</span><span class="token punctuation">(</span><span class="token string">'screen'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Screen</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">make</span><span class="token punctuation">(</span><span class="token string">'screen'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token string">'screen'</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; true</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="binding-instances"><a href="#binding-instances" aria-hidden="true" class="header-anchor">#</a> Binding Instances</h3><p>You may also bind an existing value/object instance into the container using the instance method. The given instance will always be returned on subsequent calls into the container:</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BackButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>instance<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'container-js'</span><span class="token punctuation">)</span>
<span class="token function">instance</span><span class="token punctuation">(</span><span class="token string">'back-btn'</span><span class="token punctuation">,</span> button<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="binding-primitives"><a href="#binding-primitives" aria-hidden="true" class="header-anchor">#</a> Binding Primitives</h3><p>Sometimes you may have a service that receives some injected services, but also needs an injected primitive value such as an integer. You may easily use contextual binding to inject any value your class may need:</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>when<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'container-js'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>application <span class="token keyword">in</span> development<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">when</span><span class="token punctuation">(</span><span class="token string">'phone'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">needs</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">give</span><span class="token punctuation">(</span><span class="token string">'123456789'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="contextual-binding"><a href="#contextual-binding" aria-hidden="true" class="header-anchor">#</a> Contextual Binding</h3><p>Sometimes you may have two services that depends on the same service, but you wish to inject different implementations into each services. For example, two services may depend on different implementations of the <strong>filesystem</strong> service, where one needs access to phone or cloud storage. ContainerJS provides a simple, fluent interface for defining this behavior:</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">when</span><span class="token punctuation">(</span><span class="token string">'filemanager.sdcard'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">needs</span><span class="token punctuation">(</span><span class="token string">'filereader'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">give</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">SdCardReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token function">when</span><span class="token punctuation">(</span><span class="token string">'filemanager.clouds'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">needs</span><span class="token punctuation">(</span><span class="token string">'filereader'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">give</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">CloudReader</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>application <span class="token keyword">in</span> development<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">when</span><span class="token punctuation">(</span><span class="token string">'phone'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">needs</span><span class="token punctuation">(</span><span class="token string">'screen'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">give</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">ConsoleScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="extending-service"><a href="#extending-service" aria-hidden="true" class="header-anchor">#</a> Extending Service</h3><p>The <code>extend</code> method allows the modification of resolved services. For example, when a service is resolved, you may run additional code to decorate or configure the service. The <code>extend</code> method accepts a Closure, which should return the modified service, as its only argument:</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>extend<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'container-js'</span><span class="token punctuation">)</span>
<span class="token function">extend</span><span class="token punctuation">(</span><span class="token string">'screen'</span><span class="token punctuation">,</span> s <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="resolving"><a href="#resolving" aria-hidden="true" class="header-anchor">#</a> Resolving</h2><p>The <code>make</code> method.</p><p>You may use the <code>make</code> method to resolve a service instance out of the container. The make method accepts the name of the service you wish to resolve:</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>make<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'container-js'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> phone <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token string">'phone'</span><span class="token punctuation">)</span>
phone<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="automatic-injection"><a href="#automatic-injection" aria-hidden="true" class="header-anchor">#</a> Automatic Injection</h3><p>Alternatively, and importantly, you may &quot;type-hint&quot; the dependency in the body of the resolver of the service using <code>/*@container(...dependencies)*/</code>.
</p><p>For example, you may type-hint a service defined by your application in another service resolver or any function. The dependencies will automatically be resolved and injected into the service/callback:</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>wrap<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'container-js'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> messenger <span class="token operator">=</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'phone'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>p<span class="token punctuation">,</span> msg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token function">messenger</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; hello world</span>
<span class="token comment">// or</span>
<span class="token keyword">const</span> messenger <span class="token operator">=</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> msg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/*@container(phone)*/</span>
  <span class="token keyword">return</span> p<span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// or</span>
<span class="token function">singleton</span><span class="token punctuation">(</span><span class="token string">'database'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/*@container(config)*/</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Connector</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>'database<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div><div class="content edit-link"><!----><div class="last-updated"><span class="prefix">Last Updated: </span><span class="time">6/29/2018, 12:29:21 PM</span></div></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/container-js/" class="prev router-link-active">
          Home
        </a></span><!----></p></div></div></div></div>
    <script src="/container-js/assets/js/0.e63dcabe.js" defer></script><script src="/container-js/assets/js/app.33bb4a1f.js" defer></script>
  </body>
</html>
